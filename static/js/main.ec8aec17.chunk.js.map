{"version":3,"sources":["PageContent.tsx","logo.svg","Sidebar.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PageContent","React","useContext","AppContext","bookInfo","chapterInfo","next","prev","data","useSWR","path","useEffect","window","scrollTo","className","allowDangerousHtml","to","style","textAlign","marginTop","Sidebar","chapterPath","useParams","chapters","renderChapter","useCallback","chapter","title","subchapters","length","map","src","logo","width","margin","createContext","undefined","App","bookPath","history","useHistory","useMemo","books","find","b","fetcher","url","fetch","then","r","json","chapterInfos","findChapterInfo","sub","findFirstChapter","rawChapterInfo","push","flatenChapters","reduce","flatened","currentIndex","findIndex","c","Provider","value","Helmet","book","cover","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","revalidateOnFocus","text","document","getElementById"],"mappings":"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","file":"static/js/main.ec8aec17.chunk.js","sourcesContent":["/* eslint-disable no-console */\r\nimport React, { FunctionComponent } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { AppContext } from './App';\r\nimport useSWR from 'swr';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst PageContent: FunctionComponent = () => {\r\n  const { bookInfo, chapterInfo, next, prev } = React.useContext(AppContext);\r\n  const { data } = useSWR<string>(`/books/${bookInfo?.path}/${chapterInfo?.path}.md`);\r\n\r\n  React.useEffect(() => window.scrollTo(0, 0), [chapterInfo]);\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      {data ? (\r\n        <>\r\n          <ReactMarkdown allowDangerousHtml>{data}</ReactMarkdown>\r\n          <div className=\"bottom_navigation\">\r\n            {prev ? (\r\n              <Link to={`/${bookInfo?.path}/${prev.path}`} className=\"bottom_navigation_prev\">\r\n                ← Chương trước\r\n              </Link>\r\n            ) : (\r\n              <span></span>\r\n            )}\r\n            {next ? (\r\n              <Link to={`/${bookInfo?.path}/${next.path}`} className=\"bottom_navigation_next\">\r\n                Chương sau →\r\n              </Link>\r\n            ) : (\r\n              <span></span>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{ textAlign: 'center', marginTop: '10vh' }}>\r\n          <div className=\"lds-ellipsis\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageContent;\r\n","export default __webpack_public_path__ + \"static/media/logo.d91fb153.svg\";","import React, { FunctionComponent } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { AppContext } from './App';\r\nimport { ChapterInfo } from './model/ChapterInfo';\r\nimport logo from './logo.svg';\r\n\r\nconst Sidebar: FunctionComponent = () => {\r\n  const { chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\r\n  const { bookInfo, chapters } = React.useContext(AppContext);\r\n\r\n  const renderChapter = React.useCallback(\r\n    (chapter: ChapterInfo) => (\r\n      <li key={chapter.path + chapter.title}>\r\n        <div>\r\n          {chapter.path ? (\r\n            <Link to={`/${bookInfo?.path}/${chapter.path}`} className={chapterPath === chapter.path ? 'active' : ''}>\r\n              {chapter.title}\r\n            </Link>\r\n          ) : (\r\n            chapter.title\r\n          )}\r\n          {chapter.subchapters && chapter.subchapters.length > 0 && <ul>{chapter.subchapters.map(renderChapter)}</ul>}\r\n        </div>\r\n      </li>\r\n    ),\r\n    [bookInfo?.path, chapterPath]\r\n  );\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <Link to=\"/\">\r\n        <img src={logo} style={{ width: 64, margin: 0 }} />\r\n      </Link>\r\n      <h2 style={{ margin: '1rem 0' }}>{bookInfo?.title}</h2>\r\n      <ul>{chapters?.map(renderChapter)}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import React, { FC } from 'react';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport { BookInfo } from './model/BookInfo';\nimport { ChapterInfo } from './model/ChapterInfo';\nimport PageContent from './PageContent';\nimport books from './books.json';\nimport Sidebar from './Sidebar';\nimport useSWR from 'swr';\nimport { Helmet } from 'react-helmet';\n\ninterface AppContextInterface {\n  bookInfo?: BookInfo;\n  chapters?: ChapterInfo[];\n  chapterInfo?: ChapterInfo;\n  next?: ChapterInfo | null;\n  prev?: ChapterInfo | null;\n}\n\nexport const AppContext = React.createContext<AppContextInterface>({\n  bookInfo: undefined,\n  chapterInfo: undefined,\n});\n\nconst App: FC = () => {\n  const { bookPath, chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\n\n  const history = useHistory();\n\n  const bookInfo = React.useMemo(() => books.find((b) => b.path === bookPath), [bookPath]);\n\n  const { data: chapterInfos = [] } = useSWR<ChapterInfo[]>(bookPath ? `/books/${bookPath}/chapters.json` : null, {\n    fetcher: (url) => fetch(url).then((r) => r.json()),\n  });\n\n  const findChapterInfo = React.useCallback((path: string, chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    if (path === '') return undefined;\n\n    for (const chapter of chapters) {\n      if (chapter.path === path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findChapterInfo(path, chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const findFirstChapter = React.useCallback((chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    for (const chapter of chapters) {\n      if (chapter.path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findFirstChapter(chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const rawChapterInfo = React.useMemo(() => findChapterInfo(chapterPath || '', chapterInfos), [\n    findChapterInfo,\n    chapterPath,\n    chapterInfos,\n  ]);\n\n  const chapterInfo = React.useMemo(() => rawChapterInfo || findFirstChapter(chapterInfos), [\n    rawChapterInfo,\n    findFirstChapter,\n    chapterInfos,\n  ]);\n\n  React.useEffect(() => {\n    if (chapterInfos && chapterInfos.length > 0 && !rawChapterInfo) {\n      history.push(`/${bookInfo?.path}/${findFirstChapter(chapterInfos)?.path}`);\n    }\n  }, [bookInfo, chapterInfos, findFirstChapter, history, rawChapterInfo]);\n\n  const flatenChapters = React.useCallback((chapters: ChapterInfo[]): ChapterInfo[] => {\n    return chapters.reduce((r, chapter) => {\n      if (chapter.path && chapter.subchapters) return [...r, chapter, ...flatenChapters(chapter.subchapters)];\n      else if (chapter.path) return [...r, chapter];\n      else if (chapter.subchapters) return [...r, ...flatenChapters(chapter.subchapters)];\n      else return r;\n    }, [] as ChapterInfo[]);\n  }, []);\n\n  const flatened = React.useMemo(() => flatenChapters(chapterInfos), [chapterInfos, flatenChapters]);\n  const currentIndex = React.useMemo(() => flatened.findIndex((c) => c.path === chapterInfo?.path), [\n    chapterInfo,\n    flatened,\n  ]);\n\n  const next = React.useMemo(() => {\n    return currentIndex < flatened.length - 1 ? flatened[currentIndex + 1] : null;\n  }, [currentIndex, flatened]);\n\n  const prev = React.useMemo(() => {\n    return currentIndex > 0 ? flatened[currentIndex - 1] : null;\n  }, [currentIndex, flatened]);\n\n  return (\n    <AppContext.Provider value={{ bookInfo, chapterInfo, chapters: chapterInfos, next, prev }}>\n      <Helmet>\n        <title>{bookInfo ? `${bookInfo.title} | Sách cờ vây tiếng Việt` : 'Sách cờ vây tiếng Việt'}</title>\n      </Helmet>\n      <div className=\"App\">\n        {!bookPath ? (\n          <div className=\"book-list\">\n            {books.map((book) => (\n              <div key={book.path} className=\"book-cover\">\n                <Link to={`/${book.path}`} key={book.path}>\n                  <img src={book.cover} alt={book.title} />\n                  {book.title}\n                </Link>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <>\n            <Sidebar />\n            <PageContent />\n          </>\n        )}\n      </div>\n    </AppContext.Provider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport { render } from 'react-snapshot';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { Route } from 'react-router-dom';\nimport { SWRConfig } from 'swr';\n\nrender(\n  <React.StrictMode>\n    <SWRConfig\n      value={{\n        revalidateOnFocus: false,\n        fetcher: (url) => fetch(url).then((r) => r.text()),\n      }}\n    >\n      <Router>\n        <Route path=\"/:bookPath?/:chapterPath?\">\n          <App />\n        </Route>\n      </Router>\n    </SWRConfig>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}