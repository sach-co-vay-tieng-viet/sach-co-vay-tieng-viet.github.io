{"version":3,"sources":["PageContent.tsx","Sidebar.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PageContent","React","useContext","AppContext","bookInfo","chapterInfo","next","prev","useSWR","path","data","className","allowDangerousHtml","to","Sidebar","chapterPath","useParams","chapters","renderChapter","useCallback","chapter","title","subchapters","length","map","createContext","undefined","App","bookPath","useMemo","books","find","b","fetcher","url","fetch","then","r","json","chapterInfos","console","log","findChapterInfo","sub","findFirstChapter","flatenChapters","reduce","flatened","currentIndex","findIndex","c","Provider","value","Helmet","book","src","cover","alt","width","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","revalidateOnFocus","text","document","getElementById"],"mappings":"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","file":"static/js/main.4cb4c587.chunk.js","sourcesContent":["/* eslint-disable no-console */\r\nimport React, { FunctionComponent } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { AppContext } from './App';\r\nimport useSWR from 'swr';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst PageContent: FunctionComponent = () => {\r\n  const { bookInfo, chapterInfo, next, prev } = React.useContext(AppContext);\r\n  const { data = '' } = useSWR<string>(`/books/${bookInfo?.path}/${chapterInfo?.path}.md`);\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <ReactMarkdown allowDangerousHtml>{data}</ReactMarkdown>\r\n      <div className=\"bottom_navigation\">\r\n        {prev ? (\r\n          <Link to={prev.path || ''} className=\"bottom_navigation_prev\">\r\n            ← Chương trước\r\n          </Link>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n        {next ? (\r\n          <Link to={next.path || ''} className=\"bottom_navigation_next\">\r\n            Chương sau →\r\n          </Link>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageContent;\r\n","import React, { FunctionComponent } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { AppContext } from './App';\r\nimport { ChapterInfo } from './model/ChapterInfo';\r\n\r\nconst Sidebar: FunctionComponent = () => {\r\n  const { chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\r\n  const { bookInfo, chapters } = React.useContext(AppContext);\r\n\r\n  const renderChapter = React.useCallback(\r\n    (chapter: ChapterInfo) => (\r\n      <li key={chapter.path + chapter.title}>\r\n        <div>\r\n          {chapter.path ? (\r\n            <Link to={`/${bookInfo?.path}/${chapter.path}`} className={chapterPath === chapter.path ? 'active' : ''}>\r\n              {chapter.title}\r\n            </Link>\r\n          ) : (\r\n            chapter.title\r\n          )}\r\n          {chapter.subchapters && chapter.subchapters.length > 0 && <ul>{chapter.subchapters.map(renderChapter)}</ul>}\r\n        </div>\r\n      </li>\r\n    ),\r\n    [bookInfo?.path, chapterPath]\r\n  );\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <h2>{bookInfo?.title}</h2>\r\n      <ul>{chapters?.map(renderChapter)}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import React, { FC } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { BookInfo } from './model/BookInfo';\nimport { ChapterInfo } from './model/ChapterInfo';\nimport PageContent from './PageContent';\nimport books from './books.json';\nimport Sidebar from './Sidebar';\nimport useSWR from 'swr';\nimport { Helmet } from 'react-helmet';\n\ninterface AppContextInterface {\n  bookInfo?: BookInfo;\n  chapters?: ChapterInfo[];\n  chapterInfo?: ChapterInfo;\n  next?: ChapterInfo | null;\n  prev?: ChapterInfo | null;\n}\n\nexport const AppContext = React.createContext<AppContextInterface>({\n  bookInfo: undefined,\n  chapterInfo: undefined,\n});\n\nconst App: FC = () => {\n  const { bookPath, chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\n\n  const bookInfo = React.useMemo(() => books.find((b) => b.path === bookPath), [bookPath]);\n\n  const { data: chapterInfos = [] } = useSWR<ChapterInfo[]>(bookPath ? `/books/${bookPath}/chapters.json` : null, {\n    fetcher: (url) => fetch(url).then((r) => r.json()),\n  });\n  // eslint-disable-next-line no-console\n  console.log(chapterInfos);\n  const findChapterInfo = React.useCallback((path: string, chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    if (path === '') return undefined;\n\n    for (const chapter of chapters) {\n      if (chapter.path === path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findChapterInfo(path, chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const findFirstChapter = React.useCallback((chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    for (const chapter of chapters) {\n      if (chapter.path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findFirstChapter(chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const chapterInfo = React.useMemo(\n    () => findChapterInfo(chapterPath || '', chapterInfos) || findFirstChapter(chapterInfos),\n    [chapterPath, chapterInfos, findChapterInfo, findFirstChapter]\n  );\n\n  const flatenChapters = React.useCallback((chapters: ChapterInfo[]): ChapterInfo[] => {\n    return chapters.reduce((r, chapter) => {\n      if (chapter.path && chapter.subchapters) return [...r, chapter, ...flatenChapters(chapter.subchapters)];\n      else if (chapter.path) return [...r, chapter];\n      else if (chapter.subchapters) return [...r, ...flatenChapters(chapter.subchapters)];\n      else return r;\n    }, [] as ChapterInfo[]);\n  }, []);\n\n  const flatened = React.useMemo(() => flatenChapters(chapterInfos), [chapterInfos, flatenChapters]);\n  const currentIndex = React.useMemo(() => flatened.findIndex((c) => c.path === chapterInfo?.path), [\n    chapterInfo,\n    flatened,\n  ]);\n\n  const next = React.useMemo(() => {\n    return currentIndex < flatened.length - 1 ? flatened[currentIndex + 1] : null;\n  }, [currentIndex, flatened]);\n\n  const prev = React.useMemo(() => {\n    return currentIndex > 0 ? flatened[currentIndex - 1] : null;\n  }, [currentIndex, flatened]);\n\n  return (\n    <AppContext.Provider value={{ bookInfo, chapterInfo, chapters: chapterInfos, next, prev }}>\n      <Helmet>\n        <title>{bookInfo ? `${bookInfo.title} | Sách cờ vây tiếng Việt` : 'Sách cờ vây tiếng Việt'}</title>\n      </Helmet>\n      <div className=\"App\">\n        {!bookPath ? (\n          <div className=\"book-list\">\n            {books.map((book) => (\n              <div key={book.path} className=\"book-cover\">\n                <Link to={`/${book.path}`} key={book.path}>\n                  <img src={book.cover} alt={book.title} width=\"200px\" />\n                  {book.title}\n                </Link>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <>\n            <Sidebar />\n            <PageContent />\n          </>\n        )}\n      </div>\n    </AppContext.Provider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport { render } from 'react-snapshot';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { Route } from 'react-router-dom';\nimport { SWRConfig } from 'swr';\n\nrender(\n  <React.StrictMode>\n    <SWRConfig\n      value={{\n        revalidateOnFocus: false,\n        fetcher: (url) => fetch(url).then((r) => r.text()),\n      }}\n    >\n      <Router>\n        <Route path=\"/:bookPath?/:chapterPath?\">\n          <App />\n        </Route>\n      </Router>\n    </SWRConfig>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}