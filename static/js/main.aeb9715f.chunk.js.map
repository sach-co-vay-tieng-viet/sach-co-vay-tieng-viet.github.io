{"version":3,"sources":["PageContent.tsx","Sidebar.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["PageContent","React","useContext","AppContext","bookInfo","chapterInfo","next","prev","data","useSWR","path","className","allowDangerousHtml","to","style","textAlign","marginTop","Sidebar","chapterPath","useParams","chapters","renderChapter","useCallback","chapter","title","subchapters","length","map","createContext","undefined","App","bookPath","useMemo","books","find","b","fetcher","url","fetch","then","r","json","chapterInfos","console","log","findChapterInfo","sub","findFirstChapter","flatenChapters","reduce","flatened","currentIndex","findIndex","c","Provider","value","Helmet","book","src","cover","alt","width","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","revalidateOnFocus","text","document","getElementById"],"mappings":"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","file":"static/js/main.aeb9715f.chunk.js","sourcesContent":["/* eslint-disable no-console */\r\nimport React, { FunctionComponent } from 'react';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { AppContext } from './App';\r\nimport useSWR from 'swr';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst PageContent: FunctionComponent = () => {\r\n  const { bookInfo, chapterInfo, next, prev } = React.useContext(AppContext);\r\n  const { data } = useSWR<string>(`/books/${bookInfo?.path}/${chapterInfo?.path}.md`);\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      {data ? (\r\n        <>\r\n          <ReactMarkdown allowDangerousHtml>{data}</ReactMarkdown>\r\n          <div className=\"bottom_navigation\">\r\n            {prev ? (\r\n              <Link to={`/${bookInfo?.path}/${prev.path}`} className=\"bottom_navigation_prev\">\r\n                ← Chương trước\r\n              </Link>\r\n            ) : (\r\n              <span></span>\r\n            )}\r\n            {next ? (\r\n              <Link to={`/${bookInfo?.path}/${next.path}`} className=\"bottom_navigation_next\">\r\n                Chương sau →\r\n              </Link>\r\n            ) : (\r\n              <span></span>\r\n            )}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div style={{ textAlign: 'center', marginTop: '10vh' }}>\r\n          <div className=\"lds-ellipsis\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PageContent;\r\n","import React, { FunctionComponent } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { AppContext } from './App';\r\nimport { ChapterInfo } from './model/ChapterInfo';\r\n\r\nconst Sidebar: FunctionComponent = () => {\r\n  const { chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\r\n  const { bookInfo, chapters } = React.useContext(AppContext);\r\n\r\n  const renderChapter = React.useCallback(\r\n    (chapter: ChapterInfo) => (\r\n      <li key={chapter.path + chapter.title}>\r\n        <div>\r\n          {chapter.path ? (\r\n            <Link to={`/${bookInfo?.path}/${chapter.path}`} className={chapterPath === chapter.path ? 'active' : ''}>\r\n              {chapter.title}\r\n            </Link>\r\n          ) : (\r\n            chapter.title\r\n          )}\r\n          {chapter.subchapters && chapter.subchapters.length > 0 && <ul>{chapter.subchapters.map(renderChapter)}</ul>}\r\n        </div>\r\n      </li>\r\n    ),\r\n    [bookInfo?.path, chapterPath]\r\n  );\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <h2>{bookInfo?.title}</h2>\r\n      <ul>{chapters?.map(renderChapter)}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n","import React, { FC } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { BookInfo } from './model/BookInfo';\nimport { ChapterInfo } from './model/ChapterInfo';\nimport PageContent from './PageContent';\nimport books from './books.json';\nimport Sidebar from './Sidebar';\nimport useSWR from 'swr';\nimport { Helmet } from 'react-helmet';\n\ninterface AppContextInterface {\n  bookInfo?: BookInfo;\n  chapters?: ChapterInfo[];\n  chapterInfo?: ChapterInfo;\n  next?: ChapterInfo | null;\n  prev?: ChapterInfo | null;\n}\n\nexport const AppContext = React.createContext<AppContextInterface>({\n  bookInfo: undefined,\n  chapterInfo: undefined,\n});\n\nconst App: FC = () => {\n  const { bookPath, chapterPath } = useParams<{ bookPath?: string; chapterPath?: string }>();\n\n  const bookInfo = React.useMemo(() => books.find((b) => b.path === bookPath), [bookPath]);\n\n  const { data: chapterInfos = [] } = useSWR<ChapterInfo[]>(bookPath ? `/books/${bookPath}/chapters.json` : null, {\n    fetcher: (url) => fetch(url).then((r) => r.json()),\n  });\n  // eslint-disable-next-line no-console\n  console.log(chapterInfos);\n  const findChapterInfo = React.useCallback((path: string, chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    if (path === '') return undefined;\n\n    for (const chapter of chapters) {\n      if (chapter.path === path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findChapterInfo(path, chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const findFirstChapter = React.useCallback((chapters: ChapterInfo[]): ChapterInfo | undefined => {\n    for (const chapter of chapters) {\n      if (chapter.path) return chapter;\n      else if (chapter.subchapters && chapter.subchapters.length > 0) {\n        const sub = findFirstChapter(chapter.subchapters);\n        if (sub !== undefined) return sub;\n      }\n    }\n\n    return undefined;\n  }, []);\n\n  const chapterInfo = React.useMemo(\n    () => findChapterInfo(chapterPath || '', chapterInfos) || findFirstChapter(chapterInfos),\n    [chapterPath, chapterInfos, findChapterInfo, findFirstChapter]\n  );\n\n  const flatenChapters = React.useCallback((chapters: ChapterInfo[]): ChapterInfo[] => {\n    return chapters.reduce((r, chapter) => {\n      if (chapter.path && chapter.subchapters) return [...r, chapter, ...flatenChapters(chapter.subchapters)];\n      else if (chapter.path) return [...r, chapter];\n      else if (chapter.subchapters) return [...r, ...flatenChapters(chapter.subchapters)];\n      else return r;\n    }, [] as ChapterInfo[]);\n  }, []);\n\n  const flatened = React.useMemo(() => flatenChapters(chapterInfos), [chapterInfos, flatenChapters]);\n  const currentIndex = React.useMemo(() => flatened.findIndex((c) => c.path === chapterInfo?.path), [\n    chapterInfo,\n    flatened,\n  ]);\n\n  const next = React.useMemo(() => {\n    return currentIndex < flatened.length - 1 ? flatened[currentIndex + 1] : null;\n  }, [currentIndex, flatened]);\n\n  const prev = React.useMemo(() => {\n    return currentIndex > 0 ? flatened[currentIndex - 1] : null;\n  }, [currentIndex, flatened]);\n\n  return (\n    <AppContext.Provider value={{ bookInfo, chapterInfo, chapters: chapterInfos, next, prev }}>\n      <Helmet>\n        <title>{bookInfo ? `${bookInfo.title} | Sách cờ vây tiếng Việt` : 'Sách cờ vây tiếng Việt'}</title>\n      </Helmet>\n      <div className=\"App\">\n        {!bookPath ? (\n          <div className=\"book-list\">\n            {books.map((book) => (\n              <div key={book.path} className=\"book-cover\">\n                <Link to={`/${book.path}`} key={book.path}>\n                  <img src={book.cover} alt={book.title} width=\"200px\" />\n                  {book.title}\n                </Link>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <>\n            <Sidebar />\n            <PageContent />\n          </>\n        )}\n      </div>\n    </AppContext.Provider>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport { render } from 'react-snapshot';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { Route } from 'react-router-dom';\nimport { SWRConfig } from 'swr';\n\nrender(\n  <React.StrictMode>\n    <SWRConfig\n      value={{\n        revalidateOnFocus: false,\n        fetcher: (url) => fetch(url).then((r) => r.text()),\n      }}\n    >\n      <Router>\n        <Route path=\"/:bookPath?/:chapterPath?\">\n          <App />\n        </Route>\n      </Router>\n    </SWRConfig>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}